<?phpclass Users extends CI_Model{    public function __construct()    {        parent::__construct();    }    public function record_count()    {        return $this->db->count_all("users");    }//---------------------------------------------------    public function chek_Null($post_value){        if($post_value == '' || $post_value==null || (!isset($post_value))){            $val=0;            return $val;        }else{            return $post_value;        }    }//--------------------------------------------------    public function fetch_users($limit, $start)    {        $this->db->select('*');        $this->db->from('users');        $this->db->order_by('user_id', 'DESC');        $this->db->limit($limit, $start);        $query = $this->db->get();        if ($query->num_rows() > 0) {            foreach ($query->result() as $row) {                $data[] = $row;            }            return $data;        }        return false;    }    public function insert($file)    {        $password = $this->input->post('user_pass', true);        $password = sha1(md5($password));                      /*  echo'<pre/>';        print_r($this->input->post());        echo'<pre/>';*/      //  die;        $data = array(            "user_name" => $this->input->post('user_name'),            "user_username" => $this->input->post('user_username'),            "user_pass" => $password,            "user_email" => $this->input->post('user_email'),            "role_id_fk" => $this->input->post('role_id_fk'),            "user_phone" => $this->input->post('user_phone'),            "doctor_id" => $this->input->post('doc_id'),            "emp_code" => $this->chek_Null($this->input->post('employee_id')),            "user_photo" => $file        );           // $data["doctor_id"] = 0;            $data["dep_id"] = 0;        $done = $this->db->insert('users', $data);        if ($done == 1) {            return true;        } else {            return false;        }    }    public function display($id)    {        $this->db->where('user_id', $id);        $query = $this->db->get('users');        return $query->row_array();    }             public function display_doc($id)    {        $this->db->where('user_id', $id);        $query = $this->db->get('users');        return $query->row_array();    }    public function update($id, $user_photo)    {        $data = array(            'user_name' => $this->input->post('user_name'),            'user_username' => $this->input->post('user_username'),            'user_email' => $this->input->post('user_email'),            'doctor_id' => $this->input->post('doctor_id'),            'user_phone' => $this->input->post('user_phone'),            "dep_id" => $this->input->post('dep_id')        );        if ($this->input->post('doctor_id')) {            $data["doctor_id"] = $this->input->post('doctor_id');            $data["dep_id"] = $this->input->post('dep_id');        } else {            $data["doctor_id"] = 0;            $data["dep_id"] = 0;        }        if ($this->input->post('role_id_fk')) {            $data['role_id_fk'] = $this->input->post('role_id_fk');        }        if ($user_photo != '') {            $data['user_photo'] = $user_photo;        }              $this->db->where('user_id', $id);        $update = $this->db->update('users', $data);        if ($update == 1) {            return true;        }        return false;    }    public function delete($id)    {        $this->db->where('user_id', $id);        $this->db->delete('users');    }    public function check_user_data()    {        $this->db->select('*');        $this->db->from('users');        $this->db->where('user_username', $this->input->post('user_name'));        $this->db->where('user_pass', sha1(md5($this->input->post('user_pass'))));        $query = $this->db->get();        if ($query->num_rows() > 0) {            return $query->row_array();        } else {            return false;        }    }//---------------------------------------------------------------    public function emp_in()    {        $this->db->select('*');        $this->db->from('users');        $this->db->where("role_id_fk",1);        $query = $this->db->get();        if ($query->num_rows() > 0) {            foreach ($query->result() as $row) {                $data[] = $row->emp_code;            }            return $data;        }        return false;    }            public function doc_in()    {        $this->db->select('*');        $this->db->from('users');        $this->db->where("role_id_fk",3);        $query = $this->db->get();        if ($query->num_rows() > 0) {            foreach ($query->result() as $row) {                $data[] = $row->doctor_id;            }            return $data;        }        return false;    }        //-------------------------------------------------------public  function update_pass($id){    $password = $this->input->post('user_pass', true);    if ($password != '') {        $data['user_pass'] = sha1(md5($password));    }    $this->db->where('user_id', $id);    $this->db->update('users', $data);}//----------------------------------------------------- }// END CLASS